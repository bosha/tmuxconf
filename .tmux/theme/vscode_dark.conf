##### VS Code Dark — unified theme (truecolor + 256 fallback) #####

if-shell 'test "${COLORTERM-}" = "truecolor"' {
  # -------- TRUECOLOR --------
  set -g status on
  set -g status-interval 5
  set -g status-style "bg=#252526,fg=#d4d4d4"

  # Left: session name with blue label + separator
  set -g status-left-length 30
  set -g status-left  "#[fg=#569cd6,bg=#252526,bold] #S #[fg=#3c3c3c]#[default] "

  # Right: user | host | datetime
  set -g status-right-length 80
  # default (local): all white
  set -g status-right "#[fg=#d4d4d4]#(whoami) | #H | %Y-%m-%d %H:%M"

  # If remote: color host red
  if-shell 'test -n "$SSH_CONNECTION"' {
    set -g status-right "#[fg=#d4d4d4]#(whoami) | #[fg=#f44747]#H#[fg=#d4d4d4] | %Y-%m-%d %H:%M"
  }

  # Windows
  setw -g window-status-style          "fg=#808080,bg=#252526"
  setw -g window-status-format         " #I:#W "
  setw -g window-status-current-style  "fg=#569cd6,bg=#252526,bold"
  setw -g window-status-current-format "#[fg=#569cd6,bold] #I:#W #[default]"

  # Pane borders
  set -g pane-border-style        "fg=#5a5a5a"
  set -g pane-active-border-style "fg=#569cd6"

  # Messages / copy-mode
  set -g message-style "bg=#252526,fg=#dcdcaa"
  set -g mode-style    "bg=#569cd6,fg=#1e1e1e"

  # Pane number flash
  set -g display-panes-active-colour "#569cd6"
  set -g display-panes-colour "#808080"
} {
  # -------- 256-COLOR FALLBACK --------
  set -g status on
  set -g status-interval 5
  set -g status-style "bg=colour236,fg=colour252"

  # Left: session name with blue label + separator
  set -g status-left-length 30
  set -g status-left  "#[fg=colour75,bg=colour236,bold] #S #[fg=colour237]#[default] "

  # Right: user | host | datetime
  set -g status-right-length 80
  # default (local): all white (252)
  set -g status-right "#[fg=colour252]#(whoami) | #H | %Y-%m-%d %H:%M"

  # If remote: color host red (203)
  if-shell 'test -n "$SSH_CONNECTION"' {
    set -g status-right "#[fg=colour252]#(whoami) | #[fg=colour203]#H#[fg=colour252] | %Y-%m-%d %H:%M"
  }

  # Windows
  setw -g window-status-style          "fg=colour244,bg=colour236"
  setw -g window-status-format         " #I:#W "
  setw -g window-status-current-style  "fg=colour75,bg=colour236,bold"
  setw -g window-status-current-format "#[fg=colour75,bold] #I:#W #[default]"

  # Pane borders
  set -g pane-border-style        "fg=colour240"
  set -g pane-active-border-style "fg=colour75"

  # Messages / copy-mode
  set -g message-style "bg=colour236,fg=colour187"
  set -g mode-style    "bg=colour75,fg=colour235"

  # Pane number flash
  set -g display-panes-active-colour "colour75"
  set -g display-panes-colour "colour244"
}
