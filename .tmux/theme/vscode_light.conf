##### VS Code Light — high contrast, green accent, BLUE selection (truecolor + 256 fallback) #####

if-shell 'test "${COLORTERM-}" = "truecolor"' {
  # -------- TRUECOLOR --------
  # Palette
  # status band: #e5e5e5 (contrasts with white terminals)
  # fg:          #333333
  # accent:      #0dbc79 (VS Code terminal green)
  # border:      #bfbfbf
  # remote red:  #c72e0f
  # selection:   #007acc (VS Code blue), fg #ffffff

  set -g status on
  set -g status-interval 5
  set -g status-style "bg=#e5e5e5,fg=#333333"

  # Left: session name + separator
  set -g status-left-length 30
  set -g status-left  "#[fg=#0dbc79,bg=#e5e5e5,bold] #S #[fg=#bfbfbf]#[default] "

  # Right: user | host | datetime (remote host in red)
  set -g status-right-length 80
  set -g status-right "#[fg=#333333]#(whoami) | #H | %Y-%m-%d %H:%M"
  if-shell 'test -n "$SSH_CONNECTION"' {
    set -g status-right "#[fg=#333333]#(whoami) | #[fg=#c72e0f]#H#[fg=#333333] | %Y-%m-%d %H:%M"
  }

  # Windows (tabs)
  setw -g window-status-style          "fg=#6e6e6e,bg=#e5e5e5"
  setw -g window-status-format         " #I:#W "
  setw -g window-status-current-style  "fg=#0dbc79,bg=#e5e5e5,bold"
  setw -g window-status-current-format "#[fg=#0dbc79,bold] #I:#W #[default]"

  # Pane borders
  set -g pane-border-style        "fg=#bfbfbf"
  set -g pane-active-border-style "fg=#0dbc79"

  # Messages / copy-mode baseline
  set -g message-style "bg=#e5e5e5,fg=#c72e0f"
  set -g mode-style    "bg=#0dbc79,fg=#ffffff"   # copy-mode line/cursor band

  # Try true blue selection (tmux >= 3.2). If unsupported, fall back to mode-style in blue.
  run-shell 'tmux set -g selection-style "bg=#007acc,fg=#ffffff" 2>/dev/null || tmux set -g mode-style "bg=#007acc,fg=#ffffff"'

  # Pane number flash
  set -g display-panes-active-colour "#0dbc79"
  set -g display-panes-colour "#6e6e6e"
} {
  # -------- 256-COLOR FALLBACK --------
  # Approximations:
  # statusbg=252 fg=236 green≈35 border=250 red=160 blue=33 blue-fg=231

  set -g status on
  set -g status-interval 5
  set -g status-style "bg=colour252,fg=colour236"

  set -g status-left-length 30
  set -g status-left  "#[fg=colour35,bg=colour252,bold] #S #[fg=colour250]#[default] "

  set -g status-right-length 80
  set -g status-right "#[fg=colour236]#(whoami) | #H | %Y-%m-%d %H:%M"
  if-shell 'test -n "$SSH_CONNECTION"' {
    set -g status-right "#[fg=colour236]#(whoami) | #[fg=colour160]#H#[fg=colour236] | %Y-%m-%d %H:%M"
  }

  setw -g window-status-style          "fg=colour243,bg=colour252"
  setw -g window-status-format         " #I:#W "
  setw -g window-status-current-style  "fg=colour35,bg=colour252,bold"
  setw -g window-status-current-format "#[fg=colour35,bold] #I:#W #[default]"

  set -g pane-border-style        "fg=colour250"
  set -g pane-active-border-style "fg=colour35"

  set -g message-style "bg=colour252,fg=colour160"
  set -g mode-style    "bg=colour35,fg=colour231"

  # Blue selection fallback
  run-shell 'tmux set -g selection-style "bg=colour33,fg=colour231" 2>/dev/null || tmux set -g mode-style "bg=colour33,fg=colour231"'

  set -g display-panes-active-colour "colour35"
  set -g display-panes-colour "colour243"
}
